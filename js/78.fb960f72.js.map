{"version":3,"file":"js/78.fb960f72.js","mappings":"qnEAkHE,MAAMA,EAAa,qDACnB,IAAIC,GAAOC,EAAAA,EAAAA,IAAS,IACpB,MAAMC,GAAiBC,EAAAA,EAAAA,IAAI,IACrBC,GAAaD,EAAAA,EAAAA,IAAI,CAAC,CAACE,KAAK,OAAQC,MAAM,IAAI,CAACD,KAAK,OAAQC,MAAM,SAC9DC,GAASJ,EAAAA,EAAAA,IAAI,IACbK,GAASC,EAAAA,EAAAA,IAAO,UAChBC,EAAe,KACnBV,EAAKW,OAAS,EACd,IAAIC,EAAU,GACVC,EAAY,GACC,KAAjBN,EAAOD,QAAmBM,EAAY,UAASL,EAAOD,SAC7B,KAAzBJ,EAAeI,QAAoBO,EAAa,aAAYX,EAAeI,SACtCM,GAAxB,KAAbA,GAAgC,KAAbC,EAA8B,IAAGA,IAAmCA,EACrED,EAAL,KAAbA,EAA6Bb,EAAyB,GAAEA,MAAea,IACvEE,EAAQF,IAEJG,EAAuBC,MAAAA,IACvBC,UACEC,IAAAA,UAAc,GAAEnB,KAAckB,IAAK,CAACjB,KAAK,CAACmB,IAAIF,KAAMG,MAAMC,IAC9DC,QAAQC,IAAIF,EAASrB,KAAK,qBAE3BwB,OAAOC,GAAMH,QAAQC,IAAIE,KAC1BjB,MAEIM,EAAWY,GAAMR,IAAAA,IAAUQ,GAAKN,MAAMC,IAE1C,IAAI,IAAIM,EAAE,EAAGN,EAASrB,KAAKA,KAAKW,OAAOgB,EAAEA,IACvC3B,EAAK4B,KAAKP,EAASrB,KAAKA,KAAK2B,O,OAGjCE,EAAAA,EAAAA,KAAU,KACRf,EAAQf,M,w+CC9IZ,MAAM+B,EAAc,EAEpB","sources":["webpack://week4/./src/views/HomeView.vue","webpack://week4/./src/views/HomeView.vue?1da1"],"sourcesContent":["<template>\n  <div class=\"\">\n    <section class=\"container mt-7\" >\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"row\">\n            <div class=\"col-md-4 pe-1 mb-md-2 mb-3\">\n              <select id=\"newPost\" class=\"form-select py-2\" v-model=\"selectCreateAt\" @change=\"queryCheckFn\">\n                <option v-for=\"i in timeOption\" :key=\"i\" :value=\"i.value\">\n                  {{i.text}}\n                </option>\n              </select>\n            </div>\n            <div class=\"col-md-8\">\n              <div class=\"input-group mb-3\">\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"搜尋貼文\"\n                  aria-label=\"search\"\n                  aria-describedby=\"button-search\"\n                  v-model=\"search\"\n                />\n                <button\n                  class=\"btn btn-primary\"\n                  type=\"button\"\n                  id=\"button-search\"\n                  @click=\"queryCheckFn\"\n                >\n                  <span class=\"material-icons-outlined\"> search </span>\n                </button>\n              </div>\n            </div>\n          </div>\n          <ul class=\"ps-0\" v-if=\"data.length !== 0\">\n            <li class=\"card h-100 py-4 px-4 mb-3 border-2 shadow-black\" v-for=\"personInfo in data\" :key=\"personInfo\">\n              <div class=\"d-flex align-items-center mb-3\">\n                <img :src=\"personInfo.user.photo\" class=\"mx-3 img-fluid\" style=\"width:40px;height: 40px;border-radius: 50%;\" />\n                <div class=\"d-flex flex-column mt-2\">\n                  <a href=\"#\" class=\"mb-0 fw-bold\">{{ personInfo.user.name }}</a>\n                  <small class=\"text-muted\">{{ personInfo.createdAt }}</small>\n                </div>\n                <button class=\"btn btn-outline-danger ms-auto btn-sm\" @click=\"deleteArticleContent(personInfo._id)\">移除</button>\n              </div>\n              <p>{{ personInfo.content }}</p>\n              <img :src=\"personInfo.image\" alt=\"photo1\" class=\"img-fluid\" v-if=\"personInfo.image\" />\n              \n            </li>\n          </ul>\n          <section class=\"card border-2 shadow-black\" v-else>\n            <div class=\"card-header bg-white\">\n              <div class=\"d-flex\">\n                <div class=\"p-1 bg-danger border border-light rounded-circle me-1\"></div>\n                <div  class=\"p-1 bg-success border border-light rounded-circle me-1\"></div>\n                <div class=\"p-1 rounded-circle border border-light rounded-circle bg-warning\"></div>\n              </div>\n            </div>\n            <div class=\"card-body py-5\">\n              <p class=\"card-text text-muted text-center\">\n                目前尚無動態，新增一則貼文吧！\n              </p>\n            </div>\n          </section>\n          <!--  -->\n        </div>\n        \n      </div>\n      <div\n        class=\"list-group border border-dark rounded-pill fixed-bottom bg-secondary d-md-none mx-1\">\n        <ul class=\"d-flex justify-content-around mb-0 ps-0\">\n          <li class=\"list-group-item border-0 bg-secondary\">\n            <a href=\"#\">\n              <div class=\"rounded-circle border border-dark p-2 bg-white\">\n                <span class=\"material-icons material-icons-outlined\">\n                  home\n                </span>\n              </div>\n            </a>\n          </li>\n          <li class=\"list-group-item border-0 bg-secondary\">\n            <a href=\"#\">\n              <div class=\"rounded-circle border border-dark p-2 bg-white\">\n                <span class=\"material-icons material-icons-outlined\">\n                  notifications\n                </span>\n              </div>\n            </a>\n          </li>\n          <li class=\"list-group-item border-0 bg-secondary\">\n            <a href=\"#\">\n              <div class=\"rounded-circle border border-dark p-2 bg-white\">\n                <span class=\"material-icons material-icons-outlined\">\n                  thumb_up\n                </span>\n              </div>\n            </a>\n          </li>\n          <li class=\"list-group-item border-0 bg-secondary\">\n            <a href=\"#\">\n              <div class=\"rounded-circle border border-dark p-2 bg-primary\">\n                <span class=\"material-icons material-icons-outlined text-white\">\n                  add\n                </span>\n              </div>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </section>\n  </div>\n</template>\n<script setup>\n  import {ref, reactive, onMounted,inject } from 'vue';\n  import axios from 'axios';\n  const defaultUrl = 'https://boiling-wildwood-68884.herokuapp.com/posts';\n  let data = reactive([]);\n  const selectCreateAt = ref('');\n  const timeOption = ref([{text:'最新貼文', value:''},{text:'由舊到新', value:'asc'}])\n  const search = ref('');\n  const reload = inject('reload');\n  const queryCheckFn = ()=>{\n    data.length = 0;\n    let queryUrl ='';\n    let queryUrl2 = '';\n    search.value === ''? '' : queryUrl = `search=${search.value}`;\n    selectCreateAt.value === '' ? '' : queryUrl2 = `timeStamp=${selectCreateAt.value}`;\n    queryUrl !== '' && queryUrl2 !==''?  queryUrl +=`&${queryUrl2}`: queryUrl = queryUrl + queryUrl2;\n    queryUrl === '' ? queryUrl = defaultUrl : queryUrl = `${defaultUrl}/?${queryUrl}`;\n    getData(queryUrl)\n  }\n  const deleteArticleContent = async(id)=>{\n    if(!id)return;\n    await axios.delete(`${defaultUrl}/${id}`,{data:{_id:id}}).then((response)=>{\n      console.log(response.data,'delete success')\n    })\n    .catch((err)=>console.log(err));\n    reload();\n  };\n  const getData = (url)=>axios.get(url).then((response)=>\n  {\n    for(let i=0; response.data.data.length>i;i++){\n      data.push(response.data.data[i])\n    }\n  })\n  onMounted(()=>{\n    getData(defaultUrl)\n  })\n</script>\n","import script from \"./HomeView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomeView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["defaultUrl","data","reactive","selectCreateAt","ref","timeOption","text","value","search","reload","inject","queryCheckFn","length","queryUrl","queryUrl2","getData","deleteArticleContent","async","id","axios","_id","then","response","console","log","catch","err","url","i","push","onMounted","__exports__"],"sourceRoot":""}